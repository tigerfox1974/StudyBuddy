{% extends "base.html" %}

{% block title %}Şifremi Unuttum - StudyBuddy{% endblock %}

{% block content %}
<section class="page-gradient-bg">
    <div class="auth-page">
        <div class="auth-card">
            <div class="auth-logo">
                <img src="{{ url_for('static', filename='img/studybuddy-owl.png') }}" alt="StudyBuddy Logo">
                <h2>Şifrenizi mi Unuttunuz?</h2>
                <p style="color: var(--color-text-secondary); margin-top: var(--spacing-sm);">Email adresinizi girin, size şifre sıfırlama linki gönderelim.</p>
            </div>

            <form method="POST" action="{{ url_for('forgot_password') }}" class="auth-form" novalidate>
                {{ csrf_token_input() }}

                <div class="floating-field">
                    <div class="floating-input-wrapper">
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            class="floating-input" 
                            required 
                            autocomplete="email" 
                            autofocus>
                        <label for="email" class="floating-label">Email Adresi</label>
                    </div>
                    <small class="input-feedback" id="emailFeedback" role="alert" aria-live="polite"></small>
                </div>

                <button type="submit" class="btn-primary-custom w-100">
                    <i class="bi bi-envelope"></i> Sıfırlama Linki Gönder
                </button>

                <div class="auth-footer">
                    <a href="{{ url_for('login') }}">Giriş sayfasına dön</a>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const emailInput = document.getElementById('email');
        const field = emailInput.closest('.floating-field');
        
        const updateFloatingState = () => {
            if (emailInput.value && emailInput.value.trim() !== '') {
                field.classList.add('has-value');
            } else {
                field.classList.remove('has-value');
            }
        };
        
        emailInput.addEventListener('input', updateFloatingState);
        emailInput.addEventListener('change', updateFloatingState);
        
        setTimeout(updateFloatingState, 50);
        window.addEventListener('pageshow', updateFloatingState);
    });
</script>
{% endblock %}

